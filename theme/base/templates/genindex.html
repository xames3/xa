<!--
Index Template
==============

Author: Akshay Mestry <xa@mes3.dev>
Created on: 21 February, 2025
Last updated on: 21 December, 2025
-->
{%- extends "layout.html" -%}
{% set title = _("Index") %}
{% macro indexentries(firstname, links) %}
    {%- if links -%}
        <a href="{{ links[0][1] }}">
            {%- if links[0][0] %}<strong>
            {% endif -%}
            {{ firstname|e }}
        {%- if links[0][0] %}</strong>
    {% endif -%}
</a>
{%- for ismain, link in links[1:] -%}
    , <a href="{{ link }}">
    {% if ismain %}
        <strong>
        {% endif -%}
        [{{ loop.index }}]
    {%- if ismain %}</strong>
{% endif -%}
</a>
{%- endfor %}
{%- else %}
{{ firstname|e }}
{%- endif %}
{% endmacro %}
{%- block body %}
    {%- set only_main_nav = sidebars == ["sidebar_main_nav_links.html.jinja"] %}
    <div class="site-page{% if not only_main_nav and sidebars|length > 0 %} site-page--wide{% endif %}">
        {%- block body_before %}{%- endblock body_before -%}
            {%- if theme_show_breadcrumbs|tobool %}
                {%- include "breadcrumbs.html.jinja" %}
            {%- endif %}
            <div id="content"
                 role="main"
                 class="site-page__content site-genindex">
                <h1 id="index"
                    class="site-genindex__title">{{ _("Index") }}</h1>
                {%- for key, entries in genindexentries %}
                    <section class="site-genindex__section"
                             aria-labelledby="{{ key }}">
                        <h2 id="{{ key }}"
                            class="site-genindex__heading">{{ key }}</h2>
                        <table class="site-genindex__table">
                            <tr>
                                {%- for column in entries|slice_index(2) if column %}
                                    <td class="site-genindex__column">
                                        <ul class="site-genindex__list">
                                            {%- for entryname, (links, subitems, _) in column %}
                                                <li class="site-genindex__item">
                                                    {{ indexentries(entryname, links) }}
                                                    {%- if subitems %}
                                                        <ul class="site-genindex__sublist">
                                                            {%- for subentryname, subentrylinks in subitems %}
                                                                <li class="site-genindex__subitem">
                                                                    {{ indexentries(subentryname, subentrylinks) }}
                                                                </li>
                                                            {%- endfor %}
                                                        </ul>
                                                    {%- endif -%}
                                                </li>
                                            {%- endfor %}
                                        </ul>
                                    </td>
                                {%- endfor %}
                            </tr>
                        </table>
                    </section>
                {% endfor %}
            </div>
            {%- if theme_show_prev_next|tobool %}
                {%- include "previous_next_pages.html.jinja" %}
            {%- endif %}
            {%- block body_after %}{%- endblock body_after -%}
            </div>
        {%- endblock body %}
        {%- block on_page_toc %}
            <aside id="right-sidebar"
                   class="site-layout__sidebar site-sidebar site-sidebar--secondary site-sidebar--alpha">
                <p class="site-sidebar__title">{{ _("Jump to letter") }}</p>
                <nav class="site-sidebar__alphabet"
                     aria-label="{{ _('Index shortcuts') }}">
                    {% for key, dummy in genindexentries -%}
                        <a class="site-sidebar__alphabet-link"
                           href="#{{ key }}">{{ key }}</a>
                    {%- endfor %}
                </nav>
            </aside>
        {%- endblock on_page_toc %}
